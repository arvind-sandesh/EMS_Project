@page "/emp/create"
@inject HttpClient Http
@inject NavigationManager NavManager
@inject ILogger<WebApp.Client.Pages.Emp.EmpCreate> logger
<h3>Employee Create</h3>
@*
    <form method="post">
    <div class="mb-3">
    <label for="dept" class="form-label">Department</label>
    <select id="dept" class="form-select" @bind="empObj.DepartmentId">
    <option value="" selected="selected">-Department-</option>
    <option value="1">Dep1</option>
    <option value="2">Dep2</option>
    <option value="3">Dep3</option>
    </select>
    </div>
    <div class="mb-3">
    <label for="fname" class="form-label">First Name</label>
    <input id="fname" class="form-control" autofocus @bind="empObj.FirstName" />
    </div>
    <div class="mb-3">
    <label for="lname" class="form-label">Last Name</label>
    <input id="lname" class="form-control" autofocus @bind="empObj.LastName" />
    </div>
    <div class="mb-3">
    <label for="gender" class="form-label">Gender</label>
    <select id="gender" class="form-select" @bind="empObj.Gender">
    <option value="">-Gender-</option>
    <option value="Male">Male</option>
    <option value="Female">Female</option>
    <option value="Other">Other</option>
    </select>
    </div>
    <div class="mb-3">
    <label for="dob" class="form-label">Date of Birth</label>
    <input type="date" id="dob" class="form-control" @bind="empObj.DateOfBirth" />
    </div>
    <div class="mb-3">
    <label for="mobile" class="form-label">Mobile Number</label>
    <input id="mobile" class="form-control" @bind="empObj.MobileNumber" />
    </div>
    <div class="mb-3">
    <label for="email" class="form-label">Email Id</label>
    <input type="email" id="email" class="form-control" @bind="empObj.EmailId" />
    </div>

    <button type="submit" class="btn btn-sm btn-success" @onclick="@(async () => await AddNew())">Add New</button>
    <button class="btn btn-sm btn-danger" @onclick="@cancel">Cancel</button>
    </form>*@
<ErrorBoundary>
    <ChildContent>
        <EmpForm ButtonText="SAVE" OnValidSubmit="@AddNew" empObj="@empObj"></EmpForm>
    </ChildContent>
</ErrorBoundary>


@code {
    private Employee empObj = new() { EmployeeId = 0, DateOfBirth = DateTime.Now };
    protected async Task AddNew()
    {
        var res = await Http.PostAsJsonAsync("emp", empObj);
        if (res.StatusCode == System.Net.HttpStatusCode.OK)
        {
            NavManager.NavigateTo("/employeelist");
        }
    }


}
